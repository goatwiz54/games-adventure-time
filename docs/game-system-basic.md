# ダンジョン探索RPG 基本仕様書 (Ver 1.0)

本仕様書は、現在のコードベース (`src/`) の実装内容を正とし、未実装項目を旧仕様書から引き継いだものです。

## 1. 基本システム (実装済み)

### 1.1 画面・解像度
*   **画面サイズ:** 1280 x 720
*   **タイルサイズ:**
    *   基本: 64 x 32
    *   ワールドマップ1: 32 x 32
    *   ワールドマップ2: 16 x 16

### 1.2 時間・ターン
*   **基本経過時間:** 1アクション = 6分 (`BaseTurnToMin`)
*   **移動速度:** 0.20 (`MoveSpeed`)

### 1.3 ワールドマップ2 (World Map 2)
高度な地形生成アルゴリズムを用いたメインのワールドマップです。

*   **デフォルトサイズ:** 150 x 100
*   **タイルタイプ:**
    *   `Variable Ocean` (変動海): 陸地になりうる海
    *   `Fixed Ocean` (固定海): マップ外周などの不変の海
    *   `Soil` (陸地): 通常の地面
    *   `Transit` (経由地): 島と島を繋ぐ浅瀬や小島
    *   `Cliff` (崖): 通行不可またはコスト高の地形
    *   `Shallow` (浅瀬): 海と陸の境界
*   **生成プロセス:**
    1.  **マスク生成:** 形状タイプ（クラシック、中央島、大陸など）に基づくマスク画像の生成
    2.  **陸地生成:** ランダムウォーカーによる陸地の拡張
    3.  **地殻変動 (Tectonic Shift):** 生成途中で地形をずらし、自然な歪みを作る
    4.  **センタリング:** 陸地全体をマップ中央に配置補正
    5.  **島生成:** 空きスペースへの島配置
    6.  **航路生成 (Transit):** 島と島、大陸を結ぶ航路（飛び石状の浅瀬など）の生成
    7.  **地形詳細化:** 崖や浅瀬の付与

---

## 2. 未実装・詳細定義待ち項目 (旧仕様書より)

以下の項目は、今後実装または詳細を決定する必要があります。

### 2.1 戦闘システム詳細
*   **戦闘画面:** マップ上でそのまま戦うか（FFT方式）、専用画面に切り替わるか。
*   **コマンド:** 「たたかう」「防御」「スキル」「アイテム」「逃げる」の仕様。
*   **ダメージ計算式:** 攻撃力 - 防御力 なのか、倍率計算なのか。
*   **命中・回避:** DEXとAGIを使った具体的な判定式。
*   **死亡処理:** HP0で即消滅か、蘇生猶予があるか。全滅時の処理。

### 2.2 アイテム・装備・経済
*   **武具の種類:** パラメータ定義（剣、槍、斧、弓、杖、盾、防具類）。
*   **耐久度:** 消耗のルールと修理システム。
*   **鑑定:** 未鑑定アイテムとINT依存の成功率。
*   **通貨:** 国ごとの通貨価値変動（仕様検討中）。

### 2.3 成長・スキル・魔法
*   **経験値:** 獲得量計算式。
*   **レベルアップ:** 経験値テーブルとステータス上昇ルール。
*   **スキル/魔法:** 具体的なリスト、消費SP、射程、効果範囲。

### 2.4 街・施設
*   **宿屋:** 宿泊、回復、セーブ。
*   **酒場:** クエスト、情報収集。
*   **ギルド:** ランク昇格、スキル習得。
*   **商店:** 売買、在庫管理。

### 2.5 その他
*   **加齢:** 誕生日とステータス変化。
*   **セーブデータ:** JSON構造、オートセーブタイミング。
*   **階層移動:** ダンジョンのフロア遷移処理。
